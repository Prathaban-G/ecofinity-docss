<!doctype html>
<html lang="en" dir="ltr"
    class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-hardware/step8-config-rc-local"
    data-has-hydrated="false">

<!-- Mirrored from harp-docs.vercel.app/docs/hardware/step8-config-rc-local by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Mar 2024 21:35:59 GMT -->
<!-- Added by HTTrack -->
<meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->

<head>
    <meta charset="UTF-8">
    <meta name="generator" content="Docusaurus v3.1.1">
    <title data-rh="true">Step 6-Create Ecofinity Service| Ecofinity Documentation</title>
    <meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1">
    <meta data-rh="true" name="twitter:card" content="summary_large_image">
    <meta data-rh="true" property="og:image" content="../../img/login-page-logo.png">
    <meta data-rh="true" name="twitter:image" content="../../img/login-page-logo.png">
    <meta data-rh="true" property="og:url" content="step8-config-rc-local">
    <meta data-rh="true" property="og:locale" content="en">
    <meta data-rh="true" name="docusaurus_locale" content="en">
    <meta data-rh="true" name="docsearch:language" content="en">
    <meta data-rh="true" name="docusaurus_version" content="current">
    <meta data-rh="true" name="docusaurus_tag" content="docs-default-current">
    <meta data-rh="true" name="docsearch:version" content="current">
    <meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current">
    <meta data-rh="true" property="og:title" content="Step 8 - Setup rc-local | Harp Documentation">
    <meta data-rh="true" name="description" content="This guide is only for Devices connected with SIMCOM 7600E Modem.">
    <meta data-rh="true" property="og:description"
        content="This guide is only for Devices connected with SIMCOM 7600E Modem.">
    <link data-rh="true" rel="icon" href="../../img/favicon.ico">
    <link data-rh="true" rel="canonical" href="step8-config-rc-local">
    <link data-rh="true" rel="alternate" href="step8-config-rc-local" hreflang="en">
    <link data-rh="true" rel="alternate" href="step8-config-rc-local" hreflang="x-default">
    <link rel="alternate" type="application/rss+xml" href="../../blog/rss.xml" title="Harp Documentation RSS Feed">
    <link rel="alternate" type="application/atom+xml" href="../../blog/atom.xml" title="Harp Documentation Atom Feed">
    <link rel="stylesheet" href="../../assets/css/styles.3768ca93.css">
    <script src="../../assets/js/runtime_main.8a1fa19d.js" defer="defer"></script>
    <script src="../../assets/js/main.df785b98.js" defer="defer"></script>
    <style>

.token.keyword
{
    color: #ff79c6;
}

    </style>
</head>

<body class="navigation-with-keyboard">
    <script>!function () { function t(t) { document.documentElement.setAttribute("data-theme", t) } var e = function () { try { return new URLSearchParams(window.location.search).get("docusaurus-theme") } catch (t) { } }() || function () { try { return localStorage.getItem("theme") } catch (t) { } }(); t(null !== e ? e : "light") }(), function () { try { const c = new URLSearchParams(window.location.search).entries(); for (var [t, e] of c) if (t.startsWith("docusaurus-data-")) { var a = t.replace("docusaurus-data-", "data-"); document.documentElement.setAttribute(a, e) } } catch (t) { } }()</script>
    <div id="__docusaurus">
        <div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn"
                href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div>
                <nav aria-label="Main" class="navbar navbar--fixed-top">
                    <div class="navbar__inner">
                        <div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false"
                                class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30"
                                    aria-hidden="true">
                                    <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"
                                        d="M4 7h22M4 15h22M4 23h22"></path>
                                </svg></button><a class="navbar__brand" href="../../index.html">
                                <div class="navbar__logo"><img src="../../img/login-page-logo.png" alt="harp-logo"
                                        class="themedComponent_mlkZ themedComponent--light_NVdE" width="130px"><img
                                        src="../../img/login-page-logo.png" alt="harp-logo"
                                        class="themedComponent_mlkZ themedComponent--dark_xIcU" width="130px"></div><b
                                    class="navbar__title text--truncate"></b>
                            </a><a class="navbar__item navbar__link navbar__link--active" href="step1-install-os.html">Hardware</a><a
                                class="navbar__item navbar__link " href="../software/intro.html">Software</a><a aria-current="page"
                                class="navbar__item navbar__link " href="../deployment/intro.html">Deployment</a></div>
                        <div class="navbar__items navbar__items--right">
                            <div class="toggle_vylO colorModeToggle_DEke"></div>
                            <div class="navbarSearchContainer_Bca1"></div>
                        </div>
                    </div>
                    <div role="presentation" class="navbar-sidebar__backdrop"></div>
                </nav>
        <div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0">
            <div class="docsWrapper_hBAB"><button aria-label="Scroll back to top"
                    class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button>
                <div class="docRoot_UBD9">
                    <aside class="theme-doc-sidebar-container docSidebarContainer_YfHR">
                        <div class="sidebarViewport_aRkj">
                            <div class="sidebar_njMd">
                                <nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG">
                                    <ul class="theme-doc-sidebar-menu menu__list">
                                        <li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item">
                                            <div class="menu__list-item-collapsible">
                                                <a class="menu__link menu__link--sublist menu__link--sublist-caret"
                                                   aria-expanded="false" href="#">Hardware</a>
                                            </div>
                                            <ul class="menu__list" style="display:none;overflow:visible;height:auto">
                                                <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="step1-install-os.html">Step 1 - Install OS - Rpi Lite</a>
                                                </li>
                                                <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="step2-raspi-config.html">Step 2 - Raspi Config</a>
                                                </li>
                                                <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="step3-install-essential.html">Step 3 - Install Dependencies</a>
                                                </li>
                                                <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="step4-resolv-config.html">Step 4 - Configure DNS</a>
                                                </li>
                                                <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="step5-manage-interface.html">Step 5 - Configure IP</a>
                                                </li>
                                               
                                               
                                               
                                              
                                                
                                                
                                               
                                                <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="step6-create-ecofinity-service.html">Step 6 - Create Ecofinity Service</a>
                                                </li>
                                                <li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item">
                                                    <a class="menu__link" tabindex="0" href="step7-create-watchdog-service.html">Step 7- Create Watchdog Service</a>
                                                </li>
                                            </ul>
                                        </li>
                                        
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </aside>
                    <main class="docMainContainer_TBSr">
                        <div class="container padding-top--md padding-bottom--lg">
                            <div class="row">
                                <div class="col docItemCol_VOVn">
                                    <div class="docItemContainer_Djhp">
                                        <article>
                                            <nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl"
                                                aria-label="Breadcrumbs">
                                                <ul class="breadcrumbs" itemscope=""
                                                    itemtype="https://schema.org/BreadcrumbList">
                                                    <li class="breadcrumbs__item"><a aria-label="Home page"
                                                            class="breadcrumbs__link" href="../../index.html"><svg
                                                                viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT">
                                                                <path
                                                                    d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z"
                                                                    fill="currentColor"></path>
                                                            </svg></a></li>
                                                    <li class="breadcrumbs__item"><span
                                                            class="breadcrumbs__link">Hardware</span>
                                                        <meta itemprop="position" content="1">
                                                    </li>
                                                    <li itemscope="" itemprop="itemListElement"
                                                        itemtype="https://schema.org/ListItem"
                                                        class="breadcrumbs__item breadcrumbs__item--active"><span
                                                            class="breadcrumbs__link" itemprop="name">Step 7 - Create
                                                            Watchdog Service</span>
                                                        <meta itemprop="position" content="2">
                                                    </li>
                                                </ul>
                                            </nav>
                                            <div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button
                                                    type="button" class="clean-btn tocCollapsibleButton_TO0P">On this
                                                    page</button></div>
                                            <div class="theme-doc-markdown markdown">
                                                <h1>Step 8 - Create
                                                    Watchdog Service</h1>
                                                <div
                                                    class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success">
                                                    <div class="admonitionHeading_Gvgb"><span
                                                            class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16">
                                                                <path fill-rule="evenodd"
                                                                    d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z">
                                                                </path>
                                                            </svg></span>Note</div>
                                                    <div class="admonitionContent_BuS1">
                                                        <p>This guide is only for Devices connected with CAVLI C10GS 
                                                            Modem.</p>
                                                    </div>
                                                </div>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview:<a
                                                        href="#overview" class="hash-link"
                                                        aria-label="Direct link to Overview:"
                                                        title="Direct link to Overview:">​</a></h2>
                                                <p>This document provides instructions for creating a Ping and Reboot
                                                    service using systemd on a Linux system. The service monitors
                                                    network connectivity by pinging a specified IP address and initiates
                                                    a reboot if a certain number of consecutive ping failures occur.</p>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-it-is-needed">Why
                                                    it is Needed:<a href="#why-it-is-needed" class="hash-link"
                                                        aria-label="Direct link to Why it is Needed:"
                                                        title="Direct link to Why it is Needed:">​</a></h2>
                                                <p>This service is useful for maintaining network stability on embedded
                                                    or remote systems. It automatically detects network failures and
                                                    performs a reboot if necessary, ensuring continuous connectivity and
                                                    system availability.</p>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="steps-to-configure-etcrclocal">Create Ecofinity Service
                                                    <code></code>:<a href="#steps-to-configure-etcrclocal"
                                                        class="hash-link"
                                                        aria-label="Direct link to Create Watchdog Service"
                                                        title="Direct link to Create Watchdog Service">​</a>
                                                </h2>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7" id="edit-etcrclocal">
                                                    Create main.py
                                                    <code></code>:<a href="#edit-etcrclocal" class="hash-link"
                                                        aria-label="Direct link to  Create main.py"
                                                        title="Direct link to  Create main.py">​</a>
                                                </h3>

                                                <p>Make  Ecofinity Directory<code>/home/pi/ecoinfinity_natural_sugar</code> </p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)"></span><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)"></span><span class="token plain">mkdir /home/pi/ecoinfinity_natural_sugar</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>



                                                <p>Navigate to Ecofinity Directory<code>cd /home/pi/ecofinity</code> </p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)"></span><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)"></span><span class="token plain">cd /home/pi/ecoinfinity_natural_sugar</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                id="add-ppp-dial-up-command">Create main.py File:<a
                                                    href="#add-ppp-dial-up-command" class="hash-link"
                                                    aria-label="Direct link to Create watchdogs.py Script:"
                                                    title="Direct link to Create watchdogs.py Script:">​</a></h3>
                                            <p>Create or edit the File main.py using nano:</p>
                                            <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                <div class="codeBlockContent_biex">
                                                    <pre tabindex="0"
                                                        class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                        style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo </span><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">nano </span><span class="token plain">main.py</span><br></span></code></pre>
                                                    <div class="buttonGroup__atx"><button type="button"
                                                            aria-label="Copy code to clipboard" title="Copy"
                                                            class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                    class="copyButtonIcon_y97N">
                                                                    <path fill="currentColor"
                                                                        d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                    </path>
                                                                </svg><svg viewBox="0 0 24 24"
                                                                    class="copyButtonSuccessIcon_LjdS">
                                                                    <path fill="currentColor"
                                                                        d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                    </path>
                                                                </svg></span></button></div>
                                                </div>
                                            </div>
                                            <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                            id="copy-and-paste-the-script">Copy and Paste the Script:<a
                                                href="#copy-and-paste-the-script" class="hash-link"
                                                aria-label="Direct link to Copy and Paste the Script:"
                                                title="Direct link to Copy and Paste the Script:">​</a></h3>
                                        <p>Copy the following script and paste it into the
                                            <code>main.py</code>
                                            file:
                                        </p>
                                        <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
    <div class="codeBlockContent_biex">
       
        <pre tabindex="0"
            class="prism-code language-python codeBlock_bY9V thin-scrollbar"
            style="color:#F8F8F2;background-color:#282A36">
            <code class="codeBlockLines_e6Vv">
                <span class="token-line" style="color:#F8F8F2">
<span class="token keyword">import</span> logging
<span class="token keyword">from</span> datetime <span class="token keyword">import</span> datetime, timedelta
<span class="token keyword">from</span> pytz <span class="token keyword">import</span> timezone
<span class="token keyword">from</span> pyModbusTCP.client <span class="token keyword">import</span> ModbusClient
<span class="token keyword">from</span> rethinkdb <span class="token keyword">import</span> r
<span class="token keyword">import</span> time
<span class="token keyword">from</span> pyModbusTCP.utils <span class="token keyword">import</span> word_list_to_long, decode_ieee

<span class="token keyword">class</span> PollPLCData:
    <span class="token keyword">def</span> __init__(self, plc_ip, mode='prod'):
        self.plc_ip = plc_ip
        self.mode = mode
        self.registers = {
            'RAW_BIOGAS_m3_hr': 1,
            'RAW_BIOGAS_m3_day': 3,
            'CH4_percent_v_v_1': 5,
            'CO2_percent_v_v_1': 7,
            'H2S_1': 9,
            'CBG_Kg_hr': 11,
            'CBG_Kg_day': 13,
            'CH4_percent_v_v_2': 15,
            'CO2_percent_v_v_2': 17,
            'H2S_ppm_2': 19
        }
        self.previous_data = {}
        self.logger = self.init_logger()
        self.hourly_inserted = False
        
    <span class="token keyword">def</span> init_logger(self):
        logger = logging.getLogger('PollPLCData')
        logger.setLevel(logging.DEBUG)
        formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
        
        file_handler = logging.FileHandler('PollPLCData.log')
        file_handler.setLevel(logging.DEBUG)
        file_handler.setFormatter(formatter)
        logger.addHandler(file_handler)
        
        <span class="token keyword">return</span> logger
    <span class="token keyword">def</span> get_data(self):
        if self.mode == 'prod':
            return self.get_data_from_plc()
        else:
            self.logger.error("Invalid mode specified")
            return {}
    <span class="token keyword">def</span> get_data_from_plc(self):
        c = ModbusClient(host=self.plc_ip, port=502)
        data = {}
        c.open()
        if c.is_open:
            for name, addr in self.registers.items():
                result = c.read_holding_registers(addr - 1, 2)
                if result:
                    float_value = [decode_ieee(f) for f in word_list_to_long(result)]
                    data[name] = float_value[0]
                else:
                    self.logger.error(f"Failed to read register {name}")
            c.close()
        else:
            self.logger.error("Connection to PLC failed")
        return data
    <span class="token keyword">def</span> format_data_to_json(self, data):
        formatted_data = {
            'RAW_BIOGAS_m3_hr': data.get('RAW_BIOGAS_m3_hr', None),
            'RAW_BIOGAS_m3_day': data.get('RAW_BIOGAS_m3_day', None),
            'CH4_percent_v_v_1': data.get('CH4_percent_v_v_1', None),
            'CO2_percent_v_v_1': data.get('CO2_percent_v_v_1', None),
            'H2S_1': data.get('H2S_1', None),
            'CBG_Kg_hr': data.get('CBG_Kg_hr', None),
            'CBG_Kg_day': data.get('CBG_Kg_day', None),
            'CH4_percent_v_v_2': data.get('CH4_percent_v_v_2', None),
            'CO2_percent_v_v_2': data.get('CO2_percent_v_v_2', None),
            'H2S_ppm_2': data.get('H2S_ppm_2', None)
        }
        return formatted_data
        
        <span class="token keyword">def</span> poll_plc_data(self):
            data = self.get_data()
            if data and data != self.previous_data:  # Only send data if there is new data and it's different
                formatted_data = self.format_data_to_json(data)
                self.logger.info(f"Polled data: {formatted_data}")
                self.send_to_database(formatted_data)
                self.previous_data = data
        <span class="token keyword">def</span> send_to_database(self, data):
            conn = r.connect(host='35.154.9.250', port=28015, user='admin', password='kissanjam5rs')
            data['hardware_id'] = 'f9378b78-b6b9-4c5b-a961-4037627061d8'
            data['company_id'] = '8d9f8a98-2912-48d5-b3a4-4e08e0265af8'
            data['mode'] = self.mode
            data['created_at'] = r.now().in_timezone('+05:30')

            result = r.db('leafinfinity').table('n_sai_realtime').get('84fe089d-5c12-4a7d-a5e6-1e682eb03d2d').update(data).run(conn)

            self.logger.info(f"Data updated in database successfully: {result}")

            if data.get('CBG_Kg_day') is not None and data.get('CBG_Kg_day') != '':
                self.check_and_insert_historical_data(data, conn)
        <span class="token keyword">def</span> check_and_insert_historical_data(self, data, conn):
            current_time = datetime.now(timezone('Asia/Kolkata'))
            if current_time.minute == 0:
                hour_start = current_time.replace(minute=0, second=0, microsecond=0)
                last_record = r.db('leafinfinity').table('n_sai_historical').order_by(r.desc('created_at')).limit(1).run(conn)
                self.logger.info(f"Last Historical Data: {last_record}")
                last_record_time = last_record[0]['created_at']
                time_difference = hour_start - last_record_time
                if not last_record:
                    result_historical = r.db('leafinfinity').table('n_sai_historical').insert(data).run(conn)
                    self.logger.info(f"Historical data inserted into database successfully: {result_historical}")
                else:
                    if time_difference.total_seconds() >= 59 * 60:
                        self.logger.info(f"Difference is >= 59 minutes: {time_difference}")
                        result_historical = r.db('leafinfinity').table('n_sai_historical').insert(data).run(conn)
                        self.logger.info(f"Historical data inserted into database successfully: {result_historical}")
                    else:
                        self.logger.info(f"Difference is : {time_difference} - So not Inserting data")
<span class="token keyword">if</span>__name__ == "__main__":
    plc_poller = PollPLCData(plc_ip="192.168.10.1", mode='prod')
    while True:
    plc_poller.poll_plc_data()
    time.sleep(2)

                    </span>
            </code>
        </pre>
        <div class="buttonGroup__atx">
            <button type="button"
                aria-label="Copy code to clipboard" title="Copy"
                class="clean-btn">
                <span class="copyButtonIcons_eSgA" aria-hidden="true">
                    <svg viewBox="0 0 24 24" class="copyButtonIcon_y97N">
                        <path fill="currentColor"
                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                        </path>
                    </svg>
                    <svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS">
                        <path fill="currentColor"
                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                        </path>
                    </svg>
                </span>
            </button>
        </div>
    </div>
</div>
                                        <h3 class="anchor anchorWithStickyNavbar_LWe7" id="save-and-exit">Save
                                            and Exit:<a href="#save-and-exit" class="hash-link"
                                                aria-label="Direct link to Save and Exit:"
                                                title="Direct link to Save and Exit:">​</a></h3>
                                        <p>Save the changes and exit the text editor.</p>
                                        










                                                <h3 class="anchor anchorWithStickyNavbar_LWe7" id="edit-etcrclocal">
                                                    Create run_main.sh
                                                    <code></code>:<a href="#edit-etcrclocal" class="hash-link"
                                                        aria-label="Direct link to  Create run_main.sh"
                                                        title="Direct link to  Create run_main.sh">​</a>
                                                </h3>
                                                <p>Navigate to Ecofinity Directory<code>cd /home/pi/ecofinity</code> </p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)"></span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)"></span><span class="token plain">cd /home/pi/ecofinity</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="add-ppp-dial-up-command">Create run_main.sh Script:<a
                                                        href="#add-ppp-dial-up-command" class="hash-link"
                                                        aria-label="Direct link to Create run_main.sh Script:"
                                                        title="Direct link to Create run_main.sh Script:">​</a></h3>
                                                <p>Create or edit the shell script run_main.sh using nano:</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo </span><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">nano </span><span class="token plain">run_main.sh</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="copy-and-paste-the-script">Copy and Paste the Script:<a
                                                        href="#copy-and-paste-the-script" class="hash-link"
                                                        aria-label="Direct link to Copy and Paste the Script:"
                                                        title="Direct link to Copy and Paste the Script:">​</a></h3>
                                                <p>Copy the following script and paste it into the
                                                    <code>run_main.sh</code>
                                                    file:
                                                </p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">



                                                        <pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36">
                                                            <code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:#6272a4">#!/bin/bash</span></span><br>
<span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:#8be9fd">cd</span> <span class="token string" style="color:#f1fa8c">/home/pi/ecoinfinity_natural_sugar</span></span><br>
<span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:#8be9fd">source</span> <span class="token string" style="color:#f1fa8c">venv/bin/activate</span></span><br>
<span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:#8be9fd">python</span> <span class="token string" style="color:#f1fa8c">main.py</span></span><br>
</code>
</pre>


                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7" id="save-and-exit">Save
                                                    and Exit:<a href="#save-and-exit" class="hash-link"
                                                        aria-label="Direct link to Save and Exit:"
                                                        title="Direct link to Save and Exit:">​</a></h3>
                                                <p>Save the changes and exit the text editor.</p>
                                                
                                                        <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="make-the-script-executable">Make the Script Executable:<a
                                                        href="#make-the-script-executable" class="hash-link"
                                                        aria-label="Direct link to Make the Script Executable:"
                                                        title="Direct link to Make the Script Executable:">​</a></h3>
                                                <p>Make the run_main.sh script executable:</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> +x run_main.sh</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <h2 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="steps-to-create-harpservice">Steps to Create ecoinfinity.service:<a
                                                        href="#steps-to-create-harpservice" class="hash-link"
                                                        aria-label="Direct link to Steps to Create ecoinfinity.service"
                                                        title="Direct link to Steps to Create ecoinfinity.service">​</a></h2>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="navigate-to-systemd-directory">Navigate to Systemd Directory:<a
                                                        href="#navigate-to-systemd-directory" class="hash-link"
                                                        aria-label="Direct link to Navigate to Systemd Directory:"
                                                        title="Direct link to Navigate to Systemd Directory:">​</a></h3>
                                                <p>Open a terminal and navigate to the systemd directory:</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token builtin class-name" style="color:rgb(189, 147, 249)">cd</span><span class="token plain"> /etc/systemd/system</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="create-harpservice-file">Create ecoinfinity.service File:<a
                                                        href="#create-harpservice-file" class="hash-link"
                                                        aria-label="Direct link to Create ecoinfinity.service File:"
                                                        title="Direct link to Create ecoinfinity.service File:">​</a></h3>
                                                <p>Create a new file named ecoinfinity.service and open it in a text editor:
                                                </p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">nano</span><span class="token plain"> ecoinfinity.service</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="paste-service-configuration">Paste Service Configuration:<a
                                                        href="#paste-service-configuration" class="hash-link"
                                                        aria-label="Direct link to Paste Service Configuration:"
                                                        title="Direct link to Paste Service Configuration:">​</a></h3>
                                                <p>Copy and paste the following content into the
                                                    <code>ecoinfinity.service</code> file:</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0" class="prism-code language-ini codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36">
                                                            <code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:#ff79c6">[Unit]</span></span><br>
<span class="token-line" style="color:#F8F8F2">Description=<span class="token string" style="color:#f1fa8c">EcoInfinity Natural Sugar Service</span></span><br>
<span class="token-line" style="color:#F8F8F2">After=<span class="token string" style="color:#f1fa8c">network.target</span></span><br>
<br>
<span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:#ff79c6">[Service]</span></span><br>
<span class="token-line" style="color:#F8F8F2">ExecStart=<span class="token string" style="color:#f1fa8c">/home/pi/ecoinfinity_natural_sugar/run_main.sh</span></span><br>
<span class="token-line" style="color:#F8F8F2">Restart=<span class="token string" style="color:#f1fa8c">always</span></span><br>
<br>
<span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:#ff79c6">[Install]</span></span><br>
<span class="token-line" style="color:#F8F8F2">WantedBy=<span class="token string" style="color:#f1fa8c">multi-user.target</span></span><br>
</code>
                                                            </pre><div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7" id="save-and-exit">Save
                                                    and Exit:<a href="#save-and-exit" class="hash-link"
                                                        aria-label="Direct link to Save and Exit:"
                                                        title="Direct link to Save and Exit:">​</a></h3>
                                                <p>Save the changes and exit the text editor.</p>
                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="enable-harpservice-to-run-at-startup">Enable
                                                    <code>ecoinfinity.service</code> to Run at Startup:<a
                                                        href="#enable-harpservice-to-run-at-startup" class="hash-link"
                                                        aria-label="Direct link to enable-harpservice-to-run-at-startup"
                                                        title="Direct link to enable-harpservice-to-run-at-startup">​</a>
                                                </h3>
                                                <p>Enable the ecoinfinity.service to start automatically at system boot:</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> ecoinfinity.service</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>

                                                


                                                <h3 class="anchor anchorWithStickyNavbar_LWe7"
                                                    id="start-the-harp-service">Start the ecoinfinity.service:<a
                                                        href="#start-the-harp-service" class="hash-link"
                                                        aria-label="Direct link to Start the ecoinfinity.service:"
                                                        title="Direct link to Start the ecoinfinity.service:">​</a></h3>
                                                <p>Start the ecoinfinity.service to apply the changes immediately:</p>
                                                <div class="language-bash codeBlockContainer_Ckt0 theme-code-block"
                                                    style="--prism-color:#F8F8F2;--prism-background-color:#282A36">
                                                    <div class="codeBlockContent_biex">
                                                        <pre tabindex="0"
                                                            class="prism-code language-bash codeBlock_bY9V thin-scrollbar"
                                                            style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl start ecoinfinity.service</span><br></span></code></pre>
                                                        <div class="buttonGroup__atx"><button type="button"
                                                                aria-label="Copy code to clipboard" title="Copy"
                                                                class="clean-btn"><span class="copyButtonIcons_eSgA"
                                                                    aria-hidden="true"><svg viewBox="0 0 24 24"
                                                                        class="copyButtonIcon_y97N">
                                                                        <path fill="currentColor"
                                                                            d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z">
                                                                        </path>
                                                                    </svg><svg viewBox="0 0 24 24"
                                                                        class="copyButtonSuccessIcon_LjdS">
                                                                        <path fill="currentColor"
                                                                            d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z">
                                                                        </path>
                                                                    </svg></span></button></div>
                                                    </div>
                                                </div>





















                                                <h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">
                                                    Conclusion<a href="#conclusion" class="hash-link"
                                                        aria-label="Direct link to Conclusion"
                                                        title="Direct link to Conclusion">​</a></h2>
                                                <p>You have successfully set up a Ping and Reboot service using systemd on your Linux system. This service continuously monitors network connectivity, initiates a reboot if a specified number of ping failures occur, and ensures the system remains operational and connected to the network.
                                                </p>
                                            </div>
                                        </article>
                                        <nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a
                                                class="pagination-nav__link pagination-nav__link--prev"
                                                href="cavlic10gs-step14-creating-openvpn-service.html">
                                                <div class="pagination-nav__sublabel">Previous</div>
                                                <div class="pagination-nav__label">step13-creating-openvpn-service</div>
                                            </a></nav>
                                    </div>
                                </div>
                                <div class="col col--3">
                                    <div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop">
                                        <ul class="table-of-contents table-of-contents__left-border">
                                            <li><a href="#overview"
                                                    class="table-of-contents__link toc-highlight">Overview:</a></li>
                                            <li><a href="#why-it-is-needed"
                                                    class="table-of-contents__link toc-highlight">Why it is Needed:</a>
                                            </li>
                                            <li><a href="#steps-to-configure-etcrclocal"
                                                    class="table-of-contents__link toc-highlight">Steps to Create watchdog.sh Script:
                                                 </a>
                                                <ul>
                                                    <li><a href="#edit-etcrclocal"
                                                            class="table-of-contents__link toc-highlight">Navigate to Home Directory
                                                            <code>cd /home/pi</code>:</a></li>
                                                    <li><a href="#add-ppp-dial-up-command"
                                                            class="table-of-contents__link toc-highlight">Create watchdog.sh Script:</a></li>
                                                    
                                                            <li><a href="#copy-and-paste-the-script"
                                                                class="table-of-contents__link toc-highlight">Copy and Paste
                                                                the Script:</a></li>
                                                        <li><a href="#save-and-exit"
                                                                class="table-of-contents__link toc-highlight">Save and
                                                                Exit:</a></li>
                                                        <li><a href="#make-the-script-executable"
                                                                class="table-of-contents__link toc-highlight">Make the
                                                                Script Executable:</a></li>
                                                  
                                                            <li><a href="#steps-to-create-harpservice"
                                                                class="table-of-contents__link toc-highlight">Steps to Create
                                                                watchdog.service:</a>
                                                            <ul>
                                                                <li><a href="#navigate-to-systemd-directory"
                                                                        class="table-of-contents__link toc-highlight">Navigate to
                                                                        Systemd Directory:</a></li>
                                                                <li><a href="#create-harpservice-file"
                                                                        class="table-of-contents__link toc-highlight">Create
                                                                        watchdog.service File:</a></li>
                                                                <li><a href="#paste-service-configuration"
                                                                        class="table-of-contents__link toc-highlight">Paste Service
                                                                        Configuration:</a></li>
                                                                <li><a href="#save-and-exit"
                                                                        class="table-of-contents__link toc-highlight">Save and
                                                                        Exit:</a></li>
                                                                <li><a href="#enable-harpservice-to-run-at-startup"
                                                                        class="table-of-contents__link toc-highlight">Enable
                                                                        <code>watchdog.service</code> to Run at Startup:</a></li>
                                                                <li><a href="#start-the-harp-service"
                                                                        class="table-of-contents__link toc-highlight">Start the watchdog
                                                                        Service:</a></li>
                                                            </ul>
                                                        </li>
                                                </ul>
                                            </li>
                                            <li><a href="#conclusion"
                                                    class="table-of-contents__link toc-highlight">Conclusion</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>
                </div>
            </div>
        </div>
        <footer class="footer footer--dark">
            <div class="container container-fluid">
                <div class="footer__bottom text--center">
                    <div class="footer__copyright">Copyright © 2024 Harp Renewables. Developed by Olive IoT</div>
                </div>
            </div>
        </footer>
    </div>
</body>


<!-- Mirrored from harp-docs.vercel.app/docs/hardware/step8-config-rc-local by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Mar 2024 21:35:59 GMT -->

</html>